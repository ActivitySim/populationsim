

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PopulationSim &mdash; PopulationSim 0.2.dev1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PopulationSim 0.2.dev1 documentation" href="#"/>
        <link rel="next" title="Software Implementation" href="software.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> PopulationSim
          

          
          </a>

          
            
            
              <div class="version">
                0.2.dev1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="software.html">Software Implementation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">PopulationSim</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>PopulationSim</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="populationsim">
<h1>PopulationSim<a class="headerlink" href="#populationsim" title="Permalink to this headline">¶</a></h1>
<p>PopulationSim is an open platform for population synthesis.  It emerged
from Oregon DOT’s desire to build a shared, open, platform that could be
easily adapted for statewide, regional, and urban transportation planning needs.</p>
<div class="section" id="model-steps">
<h2>Model Steps<a class="headerlink" href="#model-steps" title="Permalink to this headline">¶</a></h2>
<p>The example PopulationSim model run consists of the following steps:</p>
<ul class="simple">
<li>input_pre_processor</li>
<li>setup_data_structures</li>
<li>initial_seed_balancing</li>
<li>meta_control_factoring</li>
<li>final_seed_balancing</li>
<li>integerize_final_seed_weights</li>
<li>sub_balancing.geography=TRACT</li>
<li>sub_balancing.geography=TAZ</li>
<li>expand_households</li>
<li>write_results</li>
<li>summarize</li>
</ul>
<p>Each step is described in detail below.</p>
<div class="section" id="input-pre-processor">
<h3>input_pre_processor<a class="headerlink" href="#input-pre-processor" title="Permalink to this headline">¶</a></h3>
<p>The inputs pre-processor reads each input table, runs pandas expressions (_expressions.csv)
against the table to create additional required table fields, and save the tables to the datastore.
For example, it processes raw Census tables to create the required fields for population
synthesis.  The inputs pre-processor exposes all input tables to the expressions calculator
so tables can be joined (such as households to persons for example). It reads the geographic
crosswalk file in order to join meta, mid, and low level zone tables if needed.  The format of
the expressions file follows ActivitySim, as shown in the example below.  The <code class="docutils literal"><span class="pre">seed_households</span></code>
expressions file below operates on the <code class="docutils literal"><span class="pre">seed_households</span></code> input file and processes the <code class="docutils literal"><span class="pre">NPF</span></code> field
to create the <code class="docutils literal"><span class="pre">FAMTAG</span></code> field, which is then used by PopulationSim in later steps.</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="36%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Description</th>
<th class="head">Target</th>
<th class="head">Expression</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HH is a family</td>
<td>FAMTAG</td>
<td>pd.notnull( NPF ) * 1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="setup-data-structures">
<h3>setup_data_structures<a class="headerlink" href="#setup-data-structures" title="Permalink to this headline">¶</a></h3>
<p>setup geographic correspondence, seeds, control sets, weights, expansion factors, and incidence tables</p>
</div>
<div class="section" id="initial-seed-balancing">
<h3>initial_seed_balancing<a class="headerlink" href="#initial-seed-balancing" title="Permalink to this headline">¶</a></h3>
<p>seed balancing</p>
</div>
<div class="section" id="meta-control-factoring">
<h3>meta_control_factoring<a class="headerlink" href="#meta-control-factoring" title="Permalink to this headline">¶</a></h3>
<p>meta level control factoring</p>
</div>
<div class="section" id="final-seed-balancing">
<h3>final_seed_balancing<a class="headerlink" href="#final-seed-balancing" title="Permalink to this headline">¶</a></h3>
<p>final balancing for each seed zone with aggregated low and mid-level controls and distributed meta-level controls</p>
</div>
<div class="section" id="integerize-final-seed-weights">
<h3>integerize_final_seed_weights<a class="headerlink" href="#integerize-final-seed-weights" title="Permalink to this headline">¶</a></h3>
<p>for each seed zone integerize the household weights</p>
</div>
<div class="section" id="sub-balancing-geography">
<h3>sub_balancing.geography<a class="headerlink" href="#sub-balancing-geography" title="Permalink to this headline">¶</a></h3>
<p>iteratively loop through seed zones, balance all lower level zones within the seed zone, and integerize the resulting household weights</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sub_balancing</span><span class="o">.</span><span class="n">geography</span><span class="o">=</span><span class="n">TRACT</span>
<span class="n">sub_balancing</span><span class="o">.</span><span class="n">geography</span><span class="o">=</span><span class="n">TAZ</span>
</pre></div>
</div>
</div>
<div class="section" id="expand-households">
<h3>expand_households<a class="headerlink" href="#expand-households" title="Permalink to this headline">¶</a></h3>
<p>expand household and person records with final weights to one household and one person record per weight with unique IDs</p>
</div>
<div class="section" id="write-results">
<h3>write_results<a class="headerlink" href="#write-results" title="Permalink to this headline">¶</a></h3>
<p>write the expanded household and person files to CSV files</p>
</div>
<div class="section" id="summarize">
<h3>summarize<a class="headerlink" href="#summarize" title="Permalink to this headline">¶</a></h3>
<p>write summary files - balancer and integerizer results by geography, etc.</p>
</div>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="software.html">Software Implementation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="software.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="software.html#set-up-and-run">Set Up and Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="software.html#folder-file-setup">Folder &amp; File Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="software.html#outputs">Outputs</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="software.html" class="btn btn-neutral float-right" title="Software Implementation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright contributing authors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.2.dev1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>